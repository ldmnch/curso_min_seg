getwd()
knitr::opts_chunk$set(echo=FALSE)
library(tidyverse)
df <- readxl::read_excel("./clase4/data/Integrado_HD_base_usuaria_2017-2020.xlsx")
library(tidyverse)
df <- readxl::read_excel("./clase4/data/Integrado_HD_base_usuaria_2017-2020.xlsx")
library(tidyverse)
df <- readxl::read_excel("../clase4/data/Integrado_HD_base_usuaria_2017-2020.xlsx")
View(df)
df %>%
group_by(clase_arma)%>%
summarize(n=n())
df %>%
group_by(provincia, clase_arma)%>%
summarize(n=n())
df %>%
group_by(provincia)%>%
summarize(mean_vic=round(mean(cant_vic,na.rm=TRUE)))
df %>%
group_by(ani+)%>%
df %>%
group_by(anio)%>%
summarize(mean_vic=round(mean(cant_vic,na.rm=TRUE)))
df %>%
group_by(clase_arma)%>%
summarize(mean_vic=round(mean(cant_vic,na.rm=TRUE)))
df %>%
group_by(anio)%>%
summarize(mean_vic=round(mean(cant_vic,na.rm=TRUE)),
mean_inc = round(mean(cant_inc, na.rm=TRUE)))
knitr::opts_chunk$set(echo=FALSE)
knitr::opts_chunk$set(echo=TRUE, message=FALSE, warning=FALSE, tidy=TRUE)
library(tidyverse)
df <- readxl::read_excel("../clase4/data/Integrado_HD_base_usuaria_2017-2020.xlsx")
df %>%
group_by(clase_arma)%>%
summarize(n=n())
df %>%
group_by(provincia, clase_arma)%>%
summarize(n=n())
df %>%
group_by(anio)%>%
summarize(mean_vic=round(mean(cant_vic,na.rm=TRUE)),
mean_inc = round(mean(cant_inc, na.rm=TRUE)))
knitr::opts_chunk$set(echo=FALSE)
knitr::opts_chunk$set(echo=TRUE, message=FALSE, warning=FALSE, tidy=TRUE)
library(tidyverse)
df <- readxl::read_excel("../clase4/data/Integrado_HD_base_usuaria_2017-2020.xlsx")
df %>%
group_by(clase_arma)%>%
summarize(n=n())
df %>%
group_by(provincia, clase_arma)%>%
summarize(n=n())
df %>%
group_by(anio)%>%
summarize(mean_vic=round(mean(cant_vic,na.rm=TRUE)),
mean_inc = round(mean(cant_inc, na.rm=TRUE)))
medidas_resumen <- df %>%
group_by(provincia) %>%
summarise(media_inc = mean(cant_inc, na.rm = TRUE),
mediana_inc = median(cant_inc, na.rm = TRUE)) %>%
select(provincia,
media_inc, mediana_inc)
View(medidas_resumen)
View(medidas_resumen)
pivot_longer_resumen <- medidas_resumen%>%
pivot_longer(cols = c(media_anio, mediana_anio),
names_to = "variable",
values_to = "valor")
pivot_longer_resumen <- medidas_resumen%>%
pivot_longer(cols = c(media_inc, mediana_inc),
names_to = "variable",
values_to = "valor")
pivot_longer_resumen
medidas_resumen
pivot_longer_resumen
pivot_longer_resumen%>% pivot_wider(id_cols= provincia,
names_from=variable,
values_from = valor)
geo <- read_csv('./data/provincia.csv') %>% select(nam, geom)
head(geo)
View(df)
geo <- read_sf('./data/pxlocdatos.shp')
geo <- st::read_sf('./data/pxlocdatos.shp')
geo <- sp::read_sf('./data/pxlocdatos.shp')
geo <- sf::read_sf('./data/pxlocdatos.shp')
View(geo)
geo <- sf::read_sf('./data/pxpciadatosok.shp')
View(geo)
geo <- sf::read_sf('./data/pxlocdatos.shp')
View(df)
df_merged <- df %>% left_join(geo, by = c("Cod_INDEC_Prov" = "codpcia", "codigo_departamento" = "coddpto"))
View(df_merged)
geo <- sf::read_sf('./data/pxlocdatos.shp') %>% select(codpcia, coddpto, geometry)
head(geo)
df_merged <- df %>% left_join(geo, by = c("Cod_INDEC_Prov" = "codpcia", "codigo_departamento" = "coddpto"))
colnames(df_merged)
knitr::opts_chunk$set(echo=FALSE)
knitr::opts_chunk$set(echo=TRUE, message=FALSE, warning=FALSE, tidy=TRUE)
library(tidyverse)
df <- readxl::read_excel("./clase4/data/Integrado_HD_base_usuaria_2017-2020.xlsx")
class(df$fecha_hecho)
fecha_1 <- "30 de abril"
library(lubridate)
dy(fecha_1)
dm(fecha_1)
fecha_1 <- "30 de abril 2021"
dmy(fecha_1)
fecha_3 <- c("Oct 4", "May 20", "Feb 15")
parse_date_time(fecha_3, orders = 'md')
class(fecha_3)
fecha_3
fecha_3 <- c("Oct 4", "May 20", "Feb 15")
parse_date_time(fecha_3, orders = 'md')
fecha_3 <- parse_date_time(fecha_3, orders = 'md')
class(fecha_3)
fecha_3 <- c("Oct 4", "May 20", "Feb 15")
parse_date_time(fecha_3, orders = 'md')
data_ejemplo_fecha <- df %>% select(fecha_hecho) %>%
mutate(dia = wday(fecha_hecho),
dia_semana = wday(fecha_hecho, label = TRUE),
mes = month(fecha_hecho),
mes_nombre = month(fecha_hecho, label =TRUE),
anio = year(fecha_hecho))
head(data_ejemplo_fecha)
max(df$fecha_hecho)-min(df$fecha_hecho)
month(max(df$fecha_hecho)-min(df$fecha_hecho))
max(df$fecha_hecho)-min(df$fecha_hecho)
fecha_4 <- df$fecha_hecho[4]
fecha_4
ejemplo_3+days(4)
fecha_4 <- df$fecha_hecho[4]
fecha_4
fecha_4+days(4)
fecha_4+months(5)
fecha_4+years(2)
library(readr)
Base_PUFEAF <- read_csv("data/Base_PUFEAF.csv")
View(Base_PUFEAF)
